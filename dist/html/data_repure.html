<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
    .choose {
        margin: 30px 0;
    }
    </style>
</head>
<body>
    <div class="wrapper" id='wrap'>
        <div class="choose">
            <h2>vr体验游戏</h2>
            <label for="">
                <input type="checkbox" name='line1' data-price='800' data-per='0.3' /> 僵尸大战
            </label>
            <label for="">
                <input type="checkbox" name='line1' data-price='800' data-per='0.3' /> 情景cs
            </label>
            <label for="">
                <input type="checkbox" name='line1' data-price='800' data-per='0.3' /> 情景cs
            </label>
            <label for="">
                <input type="checkbox" name='line1' data-price='800' data-per='0.3' /> 星际遨游
            </label>
            <label for="">
                <input type="checkbox" name='line1' data-price='800' data-per='0.3' /> 游戏cs6
            </label>
            <label for="">
                <input type="checkbox" name='line1' data-price='800' data-per='0.3' /> 游戏5
            </label>
        </div>
        <div class="choose">
            <h2>oculus体验</h2>
            <label for="">
                <input type="checkbox" name='line2' data-price='700' data-per='0.2' /> 僵尸大战
            </label>
            <label for="">
                <input type="checkbox" name='line2' data-price='700' data-per='0.2' /> 情景cs
            </label>
            <label for="">
                <input type="checkbox" name='line2' data-price='700' data-per='0.2' /> 星际遨游
            </label>
            <label for="">
                <input type="checkbox" name='line2' data-price='700' data-per='0.2' /> 游戏cs6
            </label>
            <label for="">
                <input type="checkbox" name='line2' data-price='700' data-per='0.2' /> 游戏5
            </label>
        </div>
        <div class="choose">
            <h2>xbox+显示器</h2>
            <label for="">
                <input type="checkbox" name='line3' data-price='500' data-per='0.5' /> 僵尸大战
            </label>
            <label for="">
                <input type="checkbox" name='line3' data-price='500' data-per='0.5' /> 情景cs
            </label>
            <label for="">
                <input type="checkbox" name='line3' data-price='500' data-per='0.5' /> 星际遨游
            </label>
            <label for="">
                <input type="checkbox" name='line3' data-price='500' data-per='0.5' /> 游戏cs6
            </label>
            <label for="">
                <input type="checkbox" name='line3' data-price='500' data-per='0.5' /> 游戏5
            </label>
        </div>
        <div class="choose">
            <h2>xbox+显示器</h2>
            <label for="">
                <input type="checkbox" name='line4' data-price='400' data-per='1' /> 僵尸大战
            </label>
            <label for="">
                <input type="checkbox" name='line4' data-price='400' data-per='1' /> 情景cs
            </label>
            <label for="">
                <input type="checkbox" name='line4' data-price='400' data-per='1' /> 星际遨游
            </label>
            <label for="">
                <input type="checkbox" name='line4' data-price='400' data-per='1' /> 游戏cs6
            </label>
            <label for="">
                <input type="checkbox" name='line4' data-price='400' data-per='1' /> 游戏5
            </label>
        </div>
        <div class="total">
            总价：
            <span id="totalPrice">0.00</span>
        </div>
    </div>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script>
    $(function() {
        var str = "";
        var info = getChkInfo("wrap");
        //种类1:价格不固定
        function kind1(num, per, price) {
            var sum,
                oneSum = 0;
            if (num == 0) {
                return 0
            };
            var el = (num - 1) * per;
            var total = ((1 + el) * price);
            return total;
        }
        //每一组选择的数量
        $('input').change(function() {
            var info = getChkInfo("wrap");
            var oneSum = 0,
                sumTotal = 0;
            for (var i in info) {
                var obj = info[i];
                console.log(obj)
                    //一组的总价
                oneSum = kind1(obj.checkedCount, obj.checkedPer, obj.checkedPrice);
                sumTotal += oneSum;
                //sumTotal = parseFloat(sumTotal*100/100).toFixed(2);
                str += "组名：" + obj.name + ", 组中元素选中个数：" + obj.checkedCount + ',价格是：' + obj.checkedPrice + ',折扣是：' + obj.checkedPer + ',总价是：' + oneSum + "\n";
            }
            console.log(str);
            $('#totalPrice').html(sumTotal.toFixed(2));
        });
        //计算选中的数量
        function getChkInfo(id) {
            var result = {},
                nameArr = [],
                groupArr = [],
                priceArr = [],
                perArr = [];
            var $obj = $("#" + id);
            $obj.find(":checkbox").each(function() {
                var $chk = $(this);
                if (this.name != undefined && this.name != null && this.name != "" && $.inArray(this.name, nameArr) == -1) {
                    var single = {};
                    single.name = this.name;
                    single.count = $obj.find(":checkbox[name='" + this.name + "']").length;
                    single.checkedCount = $obj.find(":checkbox[name='" + this.name + "']:checked").length;
                    single.checkedPrice = $obj.find(":checkbox[name='" + this.name + "']").attr('data-price');
                    single.checkedPer = $obj.find(":checkbox[name='" + this.name + "']").attr('data-per');
                    nameArr.push(this.name); //名字数组
                    groupArr.push(single); //
                    priceArr.push(single); //价格数组
                    perArr.push(single); //优惠
                }
            });
            return groupArr;
        }
    });
    </script>
</body>
</html>
